<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Aduh Tante</title>
    <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header id="custom-title-bar">
        <div class="title">Sudah Terbiasa Terjadi Tante</div>
        <div id="window-controls">
            <button id="home-btn"><img src="assets/home.png"></button>
        </div>
    </header>

    <audio id="audio" src="./assets/sound.mp3" preload="auto"></audio>
    <div id="lyrics"><span id="text">Klik di sini untuk mulai</span><span class="cursor">|</span></div>

    <script>
        document.getElementById('home-btn').addEventListener('click', () => {
            location.reload();
        });

        const audio = document.getElementById("audio");

        let isClicked = false;
        const lyricContainer = document.getElementById("lyrics");
        lyricContainer.addEventListener("click", () => {
            if (isClicked === false) {
                isClicked = true;
                audio.play();
                audio.addEventListener("ended", () => {
                    isClicked = false;
                })

                const lyrics = [
                    "Temanku semua pada jahat tante",
                    "Aku lagi susah mereka gaada",
                    "Coba kalau lagi jaya...",
                    "Aku dipuja-pujanya tante",
                    "Sudah terbiasa terjadi tante",
                    "Teman datang ketika lagi butuh saja",
                    "Coba kalau lagi susah",
                    "Mereka semua menghilang...",
                ];
        
                const settings = [
                //  Delay = Jeda antara object 1 dengan object 2
                //  Speed = Cepatnya teks diketik
                    { delay: 550, speed: 95 },
                    { delay: 1100, speed: 100 },
                    { delay: 1000, speed: 95 },
                    { delay: 1600, speed: 100 },
                    { delay: 1000, speed: 90 },
                    { delay: 1000, speed: 85 },
                    { delay: 1100, speed: 100 },
                    { delay: 1000, speed: 115 }
                ];
    
                let index = 0;
                let charIndex = 0;
                const display = document.getElementById('text');
                display.innerText = '';
    
                function typeLine() {
                    if (index >= lyrics.length) {
                        display.textContent = "~";
                        return;
                    }
        
                    const line = lyrics[index];
                    const config = settings[index];
        
                    if (charIndex < line.length) {
                        display.textContent += line.charAt(charIndex);
                        charIndex++;
                        setTimeout(typeLine, config.speed);
                    } else {
                        index++;
                        charIndex = 0;
                        setTimeout(() => {
                            display.textContent = '';
                            typeLine();
                        }, config.delay);
                    }
                }
                setTimeout(typeLine, 1500);
            }
        })
    </script>
</body>
</html>